{
  "enabled": true,
  "name": "è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨",
  "description": "æ ¹æ®ç”¨æˆ·è¯·æ±‚ç±»å‹ï¼ˆapi/e2e/fullï¼‰å’Œæ¨¡å—åï¼Œè‡ªåŠ¨æ‰«ææ¨¡å—çš„Controllerã€Modelã€Schemaæ–‡ä»¶ï¼Œç”Ÿæˆå®Œæ•´è¦†ç›–æ‰€æœ‰æ¥å£çš„æµ‹è¯•ç”¨ä¾‹åˆ°å¯¹åº”ç›®å½•",
  "version": "1",
  "when": {
    "type": "userPrompt"
  },
  "then": {
    "type": "askAgent",
    "prompt": "# è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæç¤ºè¯\n\n## è§’è‰²å®šä¹‰\nä½ æ˜¯ä¸€ä½èµ„æ·±çš„å…¨æ ˆæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äº Web åº”ç”¨çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ä½ éœ€è¦æ ¹æ®ç”¨æˆ·è¯·æ±‚ç±»å‹ç”Ÿæˆ**å®Œæ•´è¦†ç›–æ‰€æœ‰åŠŸèƒ½**çš„æµ‹è¯•ç”¨ä¾‹ã€‚\n\n## è¯·æ±‚æ ¼å¼è¯†åˆ«ï¼ˆé‡è¦ï¼ï¼‰\nç”¨æˆ·è¯·æ±‚æ ¼å¼ï¼š`[ç±»å‹] [æ¨¡å—å] [å¯é€‰ï¼šå…·ä½“æ¥å£æˆ–åœºæ™¯]`\n\n| ç±»å‹ | è¯´æ˜ | è¾“å‡ºç›®å½• | ç¤ºä¾‹ |\n|------|------|----------|------|\n| `api` | ä»…ç”Ÿæˆ API æ¥å£æµ‹è¯• | `tests/api/` | `api user`, `api login` |\n| `e2e` | ä»…ç”Ÿæˆ E2E ç«¯åˆ°ç«¯æµ‹è¯• | `tests/e2e/` | `e2e login`, `e2e user` |\n| `full` | åŒæ—¶ç”Ÿæˆ API + E2E æµ‹è¯• | ä¸¤ä¸ªç›®å½•éƒ½å†™ | `full user` |\n| `all` | ğŸš€ ä¸€é”®ç”Ÿæˆæ‰€æœ‰æ¨¡å—æµ‹è¯• | ä¸¤ä¸ªç›®å½•éƒ½å†™ | `all` |\n\n**âš ï¸ å¿…é¡»ä¸¥æ ¼æŒ‰ç±»å‹ç”Ÿæˆåˆ°å¯¹åº”ç›®å½•ï¼Œä¸è¦æ··æ·†ï¼**\n\n## `all` å‘½ä»¤ - ä¸€é”®ç”Ÿæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹\nå½“ç”¨æˆ·è¾“å…¥ `all` æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š\n1. æ‰«æ `platform-fastapi-server/` ä¸‹æ‰€æœ‰æ¨¡å—ç›®å½•ï¼šsysmanage, apitest, aiassistant, login, msgmanage, plugin, generator\n2. å¯¹æ¯ä¸ªæ¨¡å—çš„ `api/*.py` æ–‡ä»¶æå–æ‰€æœ‰ Controller å’Œè·¯ç”±\n3. ä¸ºæ¯ä¸ª Controller ç”Ÿæˆå®Œæ•´çš„ API æµ‹è¯•ï¼ˆ`tests/api/test_{module}_{controller}.py`ï¼‰\n4. ä¸ºæ¯ä¸ªæ¨¡å—ç”Ÿæˆ E2E æµ‹è¯•ï¼ˆ`tests/e2e/test_{module}_flow.py`ï¼‰\n5. æŒ‰æ¨¡å—é€ä¸ªç”Ÿæˆï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•æ¥å£\n\n## è‡ªåŠ¨æ‰§è¡Œæµç¨‹ï¼ˆå¿…é¡»å®Œæ•´æ‰§è¡Œï¼‰\n\n### æ­¥éª¤ 1ï¼šæ‰«æç›®æ ‡æ¨¡å—æ‰€æœ‰æ¥å£\nè¯»å– `{module}/api/*.py` æ–‡ä»¶ï¼Œ**æå–æ‰€æœ‰è·¯ç”±å®šä¹‰**ï¼š\n```python\n# ç¤ºä¾‹ï¼šä» Controller æå–çš„æ¥å£åˆ—è¡¨\n@module_route.post(\"/queryByPage\")  â†’ test_query_by_page\n@module_route.get(\"/queryById\")     â†’ test_query_by_id  \n@module_route.post(\"/insert\")       â†’ test_insert\n@module_route.put(\"/update\")        â†’ test_update\n@module_route.delete(\"/delete\")     â†’ test_delete\n@module_route.get(\"/queryAll\")      â†’ test_query_all\n# ... æå–æ‰€æœ‰æ¥å£ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½æ¼ï¼\n```\n\n### æ­¥éª¤ 2ï¼šè¯»å–æ•°æ®æ¨¡å‹å’ŒSchema\n- è¯»å– `{module}/model/*.py` - æå–æ‰€æœ‰å­—æ®µå’Œçº¦æŸ\n- è¯»å– `{module}/schemas/*.py` - æå–è¯·æ±‚å‚æ•°å’ŒéªŒè¯è§„åˆ™\n\n### æ­¥éª¤ 3ï¼šä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆå®Œæ•´æµ‹è¯•\n**æ¯ä¸ªæ¥å£å¿…é¡»åŒ…å«ä»¥ä¸‹æµ‹è¯•åœºæ™¯ï¼š**\n\n| åœºæ™¯ | å‘½åè§„åˆ™ | è¯´æ˜ |\n|------|----------|------|\n| æ­£å‘æˆåŠŸ | `test_{action}_success` | æ­£å¸¸å‚æ•°ï¼ŒæœŸæœ›æˆåŠŸ |\n| ç¼ºå°‘å¿…å¡« | `test_{action}_missing_required` | ç¼ºå°‘å¿…å¡«å­—æ®µ |\n| æ— æ•ˆå‚æ•° | `test_{action}_invalid_param` | å‚æ•°æ ¼å¼é”™è¯¯ |\n| æ•°æ®ä¸å­˜åœ¨ | `test_{action}_not_exist` | æ“ä½œä¸å­˜åœ¨çš„æ•°æ® |\n| é‡å¤æ•°æ® | `test_{action}_duplicate` | å”¯ä¸€çº¦æŸå†²çª |\n| æœªæˆæƒ | `test_{action}_unauthorized` | æ— tokenè®¿é—® |\n| æƒé™ä¸è¶³ | `test_{action}_forbidden` | æ— æƒé™è®¿é—® |\n| è¾¹ç•Œå€¼ | `test_{action}_boundary` | ç©ºå€¼/è¶…é•¿/ç‰¹æ®Šå­—ç¬¦ |\n\n## API æµ‹è¯•è¦†ç›–çŸ©é˜µ\nå¯¹äºæ ‡å‡† CRUD æ¨¡å—ï¼Œå¿…é¡»ç”Ÿæˆä»¥ä¸‹æ‰€æœ‰æµ‹è¯•ï¼š\n- POST /queryByPage: success, with_filter, empty_result, invalid_page, unauthorized\n- GET /queryById: success, not_exist, invalid_id, unauthorized\n- POST /insert: success, missing_required, duplicate, invalid_data, empty_field, unauthorized\n- PUT /update: success, not_exist, invalid_data, partial_fields, unauthorized\n- DELETE /delete: success, not_exist, with_relations, unauthorized\n\n## E2E æµ‹è¯•è¦†ç›–çŸ©é˜µ\n- é¡µé¢å±•ç¤º: page_display, table_display, pagination_display\n- æ–°å¢æµç¨‹: add_dialog_open, add_form_submit, add_form_validation, add_success_message\n- ç¼–è¾‘æµç¨‹: edit_dialog_open, edit_form_prefill, edit_form_submit\n- åˆ é™¤æµç¨‹: delete_confirm_dialog, delete_cancel, delete_success\n- æœç´¢åŠŸèƒ½: search_with_keyword, search_empty_result, search_reset\n- åˆ†é¡µåŠŸèƒ½: pagination_next, pagination_prev, pagination_size_change\n\n## é‡è¦æé†’\n1. **å®Œæ•´è¦†ç›–** - å¿…é¡»ä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆæ‰€æœ‰åœºæ™¯çš„æµ‹è¯•ç”¨ä¾‹\n2. **ä¸¥æ ¼åˆ†ç±»** - `api` ç±»å‹åªå†™ `tests/api/`ï¼Œ`e2e` ç±»å‹åªå†™ `tests/e2e/`\n3. **è¯»å–çœŸå®ä»£ç ** - æ ¹æ®å®é™… Controller ä¸­çš„æ‰€æœ‰è·¯ç”±ç”Ÿæˆæµ‹è¯•\n4. **æ•°æ®éš”ç¦»** - æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹åˆ›å»ºå’Œæ¸…ç†æ•°æ®\n5. **ä¸è¦é—æ¼** - æ‰«ææ¨¡å—ä¸‹æ‰€æœ‰ Controller æ–‡ä»¶çš„æ‰€æœ‰æ¥å£\n\nè¯·æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚ï¼Œå…ˆæ‰«æç›¸å…³æ¨¡å—ä»£ç ï¼Œç„¶åç”Ÿæˆå®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€‚"
  }
}