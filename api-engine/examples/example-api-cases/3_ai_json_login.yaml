desc: AI版-JSON格式登录

# 使用AI关键字进行JSON格式登录测试
# 与传统关键字版本(3_json_login.yaml)对比，AI版本自动处理JSON格式

pre_script:
  - 'print("AI版JSON登录测试开始...")'

steps:
  # 1. 配置 AI 助手
  - 配置AI助手:
      关键字: ai_configure
      llm_provider: siliconflow
      llm_model: deepseek-ai/DeepSeek-V3

  # 2. AI 发送JSON格式登录请求
  - AI发送JSON登录:
      关键字: ai_send_request
      task: "使用JSON格式发送登录请求，用户名hami，密码123456"
      base_url: "{{URL}}"

  # 3. AI 验证登录响应
  - AI验证登录响应:
      关键字: ai_assert_response
      assertion: "登录应该成功，响应应该包含有效的token"

  # 4. AI 提取Token
  - AI提取Token:
      关键字: ai_extract_data
      extraction: "从响应JSON中提取token字段"
      variable_name: msg_token

  # 5. AI 分析JSON响应
  - AI分析响应格式:
      关键字: ai_analyze_response
      focus: "JSON响应格式的规范性和数据完整性"

post_script:
  - 'print("AI版JSON登录测试完成...")'
