desc: AI版-下载图片并进行比对

# 使用AI关键字进行文件下载和比对测试
# 与传统关键字版本(5_download_image_comparison.yaml)对比，AI版本提供更智能的分析
# 注意：此接口需要先启动本地flask服务

pre_script:
  - 'print("AI版文件下载测试开始...")'

steps:
  # 1. 配置 AI 助手
  - 配置AI助手:
      关键字: ai_configure
      llm_provider: siliconflow
      llm_model: deepseek-ai/DeepSeek-V3

  # 2. AI 发送下载请求
  - AI下载图片:
      关键字: ai_send_request
      task: "下载P1.png图片文件"
      base_url: "http://localhost:5000"

  # 3. AI 分析下载响应
  - AI分析下载响应:
      关键字: ai_analyze_response
      focus: "文件下载响应的完整性，包括Content-Type和文件大小"

  # 4. 传统方式进行MD5比对（精确比对仍需传统关键字）
  - 验证图片MD5:
      关键字: assert_files_by_md5_comparators
      value: e589f7595e2cf290149774a27269d876 # 正确的MD5值

post_script:
  - 'print("AI版文件下载测试完成...")'
