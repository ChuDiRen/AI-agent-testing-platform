# 基础 API 性能测试
# 演示: HTTP 请求、等待时间、响应验证

name: 基础 API 性能测试
desc: 测试用户列表接口的性能

steps:
  # GET 请求
  - 获取用户列表:
      关键字: get
      url: /api/users
      name: GET /api/users
      headers:
        Content-Type: application/json

  # 等待时间 (随机 1-3 秒)
  - 用户思考:
      关键字: wait
      min: 1
      max: 3

  # 验证状态码
  - 验证状态码:
      关键字: assert_status
      expected: 200

  # 验证响应时间
  - 验证响应时间:
      关键字: assert_response_time
      max_ms: 1000

  # POST 请求
  - 创建用户:
      关键字: post
      url: /api/users
      name: POST /api/users
      json:
        username: "testuser_{{_loop_index}}"
        email: "test@example.com"

  # 固定等待
  - 固定等待:
      关键字: wait
      seconds: 2

  # 验证响应包含
  - 验证响应:
      关键字: assert_contains
      text: "id"
