desc: 4_上传图片并且修改头像.yaml(需要外部服务,跳过)
pre_script:
- 'print("执行前...此测试需要文件上传服务,已跳过")'
- 'import pytest; pytest.skip("需要外部文件上传服务")'
steps:
- 发送请求-登录接口:
    关键字: send_request
    method: POST
    url: "{{DSWURL}}/user/login"
    data:
      username: 15096268001
      password: 123456
- 通过JSONPATH提取数据-TOKEN:
    关键字: ex_jsonData
    EXVALUE: $..token
    INDEX: 0
    VARNAME: msg_token
- 发送请求-上传图片接口:
    关键字: send_request
    method: POST
    url: "{{DSWURL}}/file/picUpload"
    files:
      - file: examples/api-cases_yaml/P1.png
- 通过JSONPATH提取数据-图片路径:
     关键字: ex_jsonData
     EXVALUE: $..data
     INDEX: 0
     VARNAME: msg_pic_path
- 发送请求-设置用户头像:
    关键字: send_request
    method: POST
    url: "{{DSWURL}}/user/updateUserInfo"
    headers:
      Authorization: "{{msg_token}}"
    data:
      userPhoto:  "{{msg_pic_path}}"
post_script:
- 'print("执行后...")'


