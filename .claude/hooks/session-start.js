#!/usr/bin/env node
/**
 * Session Start Hook v2.0
 * ä¼šè¯å¼€å§‹æ—¶è§¦å‘ï¼Œæ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯å’Œå¯ç”¨å·¥å…·
 */

const { execSync } = require('child_process');
const fs = require('fs');
const path = require('path');

function getGitInfo() {
  try {
    const branch = execSync('git branch --show-current', { 
      encoding: 'utf8',
      stdio: ['pipe', 'pipe', 'ignore']
    }).trim();
    const status = execSync('git status --porcelain', { 
      encoding: 'utf8',
      stdio: ['pipe', 'pipe', 'ignore']
    });
    const changedFiles = status.split('\n').filter(Boolean).length;
    return { branch, changedFiles };
  } catch {
    return { branch: 'unknown', changedFiles: 0 };
  }
}

function countFiles(dir, ext) {
  // Windows å…¼å®¹æ€§ - æš‚æ—¶ç¦ç”¨æ–‡ä»¶ç»Ÿè®¡
  return 0;
}

function main() {
  const gitInfo = getGitInfo();
  
  const welcomeMessage = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       ğŸš€ AI Agent Testing Platform                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸŒ¿ åˆ†æ”¯: ${gitInfo.branch.padEnd(20)}  ğŸ“ å˜æ›´æ–‡ä»¶: ${String(gitInfo.changedFiles).padEnd(15)}â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ› ï¸ æŠ€æœ¯æ ˆ                                                                    â•‘
â•‘  åç«¯: FastAPI + SQLModel + MySQL + MinIO + LangGraph                        â•‘
â•‘  å‰ç«¯: Vue 3 + Element Plus + Vuex + TailwindCSS                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“‹ å¯ç”¨å·¥å…·                                                                  â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â•‘
â•‘  Commands (14ä¸ª)  â”‚ /dev /crud /check /review /security /perf /deploy ...    â•‘
â•‘  Skills (36ä¸ª)    â”‚ è‡ªåŠ¨æ¿€æ´»ï¼ŒåŸºäºå…³é”®è¯åŒ¹é…                                  â•‘
â•‘  SubAgents (11ä¸ª) â”‚ /agent <name> è°ƒç”¨ï¼Œç‹¬ç«‹ä¸Šä¸‹æ–‡                            â•‘
â•‘  MCP (10ä¸ª)       â”‚ GitHubã€MySQLã€PostgreSQLã€Filesystem ...                 â•‘
â•‘  Plugins (10ä¸ª)   â”‚ playwrightã€code-reviewã€frontend-design ...             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âš¡ å¿«é€Ÿå¼€å§‹                                                                  â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â•‘
â•‘  /dev <éœ€æ±‚>        æ™ºèƒ½å¼€å‘æµç¨‹ï¼ˆéœ€æ±‚â†’è®¾è®¡â†’å¼€å‘â†’æµ‹è¯•ï¼‰                       â•‘
â•‘  /crud <æ¨¡å—>       ä¸€é”®ç”Ÿæˆ CRUD ä»£ç                                         â•‘
â•‘  /review            ä»£ç å®¡æŸ¥ï¼ˆæ”¯æŒ --mode security/fullï¼‰                     â•‘
â•‘  /agent <name>      è°ƒç”¨ä¸“ä¸š SubAgent                                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`;

  console.log(welcomeMessage);
  process.exit(0);
}

main();
