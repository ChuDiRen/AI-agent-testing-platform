---
description: 任务拆分规则。当用户需要将产品需求拆分为可执行的开发任务时使用。
globs:
alwaysApply: false
---

# 任务拆分规则

## 核心原则

> **任务越小越细，返回的代码质量就会越高。**

## 任务拆分原则

| 原则 | 说明 |
|------|------|
| 单一职责 | 每个任务只做一件事 |
| 可验证 | 有明确的验收标准 |
| 可估时 | 工时在 2-8 小时内 |
| 有序性 | 按依赖关系排序 |
| 独立性 | 尽量减少任务间依赖 |

## 任务编号规范

- 前端任务：`TASK-FE-001`、`TASK-FE-002`...
- 后端任务：`TASK-BE-001`、`TASK-BE-002`...

## 前后端任务区分指南

### 前端任务范畴

| 类别 | 典型任务 | 示例 |
|------|---------|------|
| **UI 组件开发** | 页面、组件、布局实现 | 创建用户列表页面、实现数据表格组件 |
| **路由配置** | 页面路由、导航设置 | 配置产品详情页路由、实现面包屑导航 |
| **状态管理** | 全局状态、数据流 | 实现 Vuex/Pinia store、管理用户状态 |
| **前端交互** | 事件处理、用户反馈 | 实现表单提交、添加加载状态提示 |
| **数据展示** | 列表、图表、动画 | 实现 ECharts 图表、添加骨架屏效果 |
| **前端校验** | 表单验证、输入限制 | 实现手机号格式校验、添加密码强度检测 |
| **性能优化** | 代码分割、懒加载 | 实现路由懒加载、优化图片资源 |

### 后端任务范畴

| 类别 | 典型任务 | 示例 |
|------|---------|------|
| **数据库设计** | 表结构、索引设计 | 设计用户表结构、创建订单关联索引 |
| **API 接口** | RESTful API、GraphQL | 实现用户列表查询 API、创建订单创建接口 |
| **业务逻辑** | 核心功能、业务规则 | 实现库存扣减逻辑、处理订单状态流转 |
| **数据处理** | 数据转换、计算统计 | 实现报表统计、生成月度销售数据 |
| **安全认证** | 权限控制、数据加密 | 实现 JWT 认证、添加用户权限管理 |
| **系统服务** | 定时任务、消息队列 | 实现每日数据备份、添加邮件通知队列 |
| **接口集成** | 第三方服务、微服务 | 集成微信支付、调用外部 API 服务 |

### 前后端协作任务

| 任务类型 | 描述 | 分工建议 |
|----------|------|----------|
| **API 对接** | 前后端数据交互约定 | 前端定义请求格式 + 后端实现接口 |
| **数据格式** | 请求/响应数据结构 | 前后端共同确认 JSON 结构 |
| **错误处理** | 统一错误码和提示 | 前端实现错误展示 + 后端定义错误标准 |

## 功能模块拆分示例

### 示例1：用户管理模块

#### 前端任务
- `TASK-FE-001`: 创建用户列表页面组件（4小时）
- `TASK-FE-002`: 实现用户查询筛选功能（3小时）
- `TASK-FE-003`: 开发新增/编辑用户弹窗（5小时）
- `TASK-FE-004`: 实现用户状态切换功能（2小时）
- `TASK-FE-005`: 添加用户列表分页和排序（3小时）

#### 后端任务
- `TASK-BE-001`: 设计用户表结构和索引（3小时）
- `TASK-BE-002`: 实现用户查询 API（支持分页、筛选）（4小时）
- `TASK-BE-003`: 开发用户创建/更新 API（4小时）
- `TASK-BE-004`: 实现用户删除和状态变更 API（3小时）
- `TASK-BE-005`: 添加用户数据验证和安全防护（3小时）

### 示例2：订单处理模块

#### 前端任务
- `TASK-FE-001`: 创建订单列表和详情页面（5小时）
- `TASK-FE-002`: 实现订单创建表单组件（4小时）
- `TASK-FE-003`: 添加订单状态追踪展示（3小时）
- `TASK-FE-004`: 实现订单导出功能（2小时）

#### 后端任务
- `TASK-BE-001`: 设计订单和订单详情表结构（4小时）
- `TASK-BE-002`: 实现订单创建和状态流转逻辑（5小时）
- `TASK-BE-003`: 开发订单查询和统计 API（4小时）
- `TASK-BE-004`: 集成支付接口和回调处理（6小时）
- `TASK-BE-005`: 实现订单库存扣减和释放机制（4小时）

## 任务模板

```markdown
## TASK-XX-001 - 任务名称

**任务描述：** 简要描述任务内容
**预估工时：** X 小时
**状态：** 计划中

### 验收标准
- [ ] 标准1
- [ ] 标准2

### 注意事项
- 注意事项1
- 注意事项2
```

## 任务状态

| 状态 | 说明 |
|------|------|
| 计划中 | 任务已创建，待开始 |
| 进行中 | 正在开发 |
| 待审查 | 开发完成，待代码审查 |
| 已完成 | 审查通过，已合并 |
| 已取消 | 任务取消 |

## 拆分流程

### 第一阶段：需求分析（整体规划）

1. **阅读需求文档**，理解完整功能
2. **识别前后端边界**，明确哪些由前端实现，哪些由后端实现
3. **梳理功能模块**，按业务逻辑分组
4. **分析依赖关系**，确定前后端任务的执行顺序

### 第二阶段：任务拆分（前后端分别）

5. **按功能模块拆分前端任务**：
   - 每个页面/组件作为一个前端任务
   - 复杂交互功能拆分为多个任务
   - 确保前端任务在 2-8 小时内可完成

6. **按功能模块拆分后端任务**：
   - 每个数据表/接口作为一个后端任务
   - 复杂业务逻辑拆分为多个任务
   - 确保后端任务在 2-8 小时内可完成

### 第三阶段：任务细化

7. **为每个任务定义验收标准**
8. **创建任务清单文件**，按类型分别保存（遵循 `file-naming` 规则）：
   - 前端任务：`doc/frontend-tasks-{timestamp}.md`
   - 后端任务：`doc/backend-tasks-{timestamp}.md`

## 拆分检查点

在完成任务拆分后，进行以下检查：

### 完整性检查
- [ ] 每个功能模块都有对应的前端和后端任务
- [ ] 所有 API 接口都有对应的调用端（前端）任务
- [ ] 数据库设计任务覆盖所有数据表需求
- [ ] UI/UX 任务覆盖所有页面和交互需求

### 合理性检查
- [ ] 每个任务都有明确的职责边界
- [ ] 前后端任务之间有清晰的接口约定
- [ ] 任务之间的依赖关系合理
- [ ] 任务工时估算在 2-8 小时范围内

### 可执行性检查
- [ ] 每个任务都有具体的验收标准
- [ ] 任务描述足够详细，可独立开发
- [ ] 任务顺序符合开发逻辑