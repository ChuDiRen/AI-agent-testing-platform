---
description: 拆分前后端开发和测试任务的命令
---

# 命令：split-tasks

## 功能描述

将项目需求拆解为详细的前后端开发任务和测试任务，**生成四个独立的任务文件**，便于前后端和测试团队并行开发和测试。

## 使用方式

```
/split-tasks
```

或

```
/split-tasks <需求文档路径>
```

## 参数说明

- `--scope=frontend` - 仅拆分前端任务，生成 `tasks-frontend.md`
- `--scope=backend` - 仅拆分后端任务，生成 `tasks-backend.md`
- `--scope=testing` - 仅拆分测试任务，生成 `tasks-api-testing.md` 和 `tasks-e2e-testing.md`
- `--scope=all` - 拆分所有任务（默认），生成四个文件
- `--include-api-tests` - 包含API测试任务（默认包含）
- `--include-e2e-tests` - 包含E2E测试任务（默认包含）

## 输出文件

执行后会生成四个独立的任务文件：

1. **`tasks-frontend.md`** - 前端开发任务清单
2. **`tasks-backend.md`** - 后端开发任务清单
3. **`tasks-api-testing.md`** - API接口测试任务清单 ⭐
4. **`tasks-e2e-testing.md`** - E2E端到端测试任务清单 ⭐

## 任务格式

每个任务包含以下字段：

```markdown
## TASK001: [任务名称]

**优先级**: 高/中/低
**状态**: 待开始/进行中/已完成
**预估工时**: X小时/X天
**依赖任务**: TASKxxx (如果有)

### 任务描述
详细的任务描述，说明要实现的功能

### 验收标准
- [ ] 功能正常工作
- [ ] 代码符合规范
- [ ] 通过代码审查
- [ ] 通过单元测试

### 技术要点
- 需要注意的技术细节
- 关键代码位置
- 相关API接口

### 注意事项
- 可能遇到的问题
- 相关文档链接
- 协作依赖
```

## 执行流程

### 阶段1：需求分析

1. **阅读需求文档**：
   - `docs/requirement.md` - 需求分析
   - `docs/api-docs/` - 接口设计
   - `prototypes/` - 原型设计

2. **功能模块识别**：
   - 列出所有功能模块
   - 识别前后端职责
   - 确定依赖关系

### 阶段2：前端任务拆分

1. **按功能模块拆分**：
   - 用户管理模块
   - 角色管理模块
   - 权限管理模块
   - 个人中心模块

2. **按技术层次拆分**：
   - 基础架构任务
   - 通用组件任务
   - 页面开发任务
   - 接口对接任务

3. **输出到 `tasks-frontend.md`**：
   - TASK001-TASK0XX：前端任务

### 阶段3：后端任务拆分

1. **按功能模块拆分**：
   - 认证授权模块
   - 用户管理模块
   - 角色管理模块
   - 权限管理模块
   - 日志管理模块

2. **按技术层次拆分**：
   - 基础架构任务
   - 实体和Mapper任务
   - Service层任务
   - Controller层任务

3. **输出到 `tasks-backend.md`**：
   - TASK001-TASK0XX：后端任务（独立编号）

### 阶段4：API测试任务拆分

1. **按测试类型拆分**：
   - 测试环境搭建
   - 认证模块API测试
   - 用户管理模块API测试
   - 部门管理模块API测试
   - 角色管理模块API测试
   - 权限管理模块API测试
   - 个人中心模块API测试
   - 日志管理模块API测试
   - 数据字典模块API测试
   - API集成测试

2. **输出到 `tasks-api-testing.md`**：
   - TEST001-TEST010：API测试任务（独立编号）

### 阶段5：E2E测试任务拆分

1. **按测试场景拆分**：
   - Playwright测试环境搭建
   - 认证和权限E2E测试
   - 用户管理E2E测试
   - 核心业务流程E2E测试

2. **输出到 `tasks-e2e-testing.md`**：
   - TEST011-TEST014：E2E测试任务（独立编号）

### 阶段6：任务关联

1. **识别前后端依赖**：
   - 前端页面依赖后端接口
   - 后端接口依赖前端需求
   - 并行开发可能性

2. **生成协作文档**：
   - 前后端接口对接计划
   - Mock数据方案
   - 联调时间安排

## 前端任务示例

### tasks-frontend.md

```markdown
# 前端开发任务清单

## 任务统计
- 总任务数：14个
- 高优先级：8个
- 中优先级：4个
- 低优先级：2个
- 预计工期：8个工作日

## 基础架构任务

### TASK001: 项目依赖安装和配置
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时

### TASK002: 路由配置和导航守卫
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK001

### TASK003: 状态管理（Pinia Store）配置
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK001

### TASK004: Axios请求封装和拦截器
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK001

### TASK005: Element Plus组件库集成
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK001

### TASK006: TypeScript类型定义
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK001

## 认证模块任务

### TASK007: 登录页面开发
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK002, TASK003, TASK004

### TASK008: 布局组件（侧边栏、顶部导航）开发
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 6小时 | **依赖任务**: TASK005

## 用户管理模块任务

### TASK009: 用户列表页面
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 6小时 | **依赖任务**: TASK008

### TASK010: 用户表单（新增/编辑）
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 5小时 | **依赖任务**: TASK009

## 角色管理模块任务

### TASK011: 角色列表页面
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 5小时 | **依赖任务**: TASK008

### TASK012: 角色权限配置页面
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 6小时 | **依赖任务**: TASK011

## 权限管理模块任务

### TASK013: 权限树形表格
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK008

## 个人中心模块任务

### TASK014: 个人中心页面
**优先级**: 低 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK008
```

## 后端任务示例

### tasks-backend.md

```markdown
# 后端开发任务清单

## 任务统计
- 总任务数：18个
- 高优先级：10个
- 中优先级：5个
- 低优先级：3个
- 预计工期：10个工作日

## 基础架构任务

### TASK001: 项目初始化和配置
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时

### TASK002: 实体类和Mapper创建
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK001

### TASK003: 数据库脚本编写和执行
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK002

### TASK004: MyBatis-Plus配置和分页插件
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK001

## 通用功能任务

### TASK005: 统一响应结果类（Result）
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 1小时

### TASK006: 全局异常处理器
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK005

## 认证模块任务

### TASK007: JWT工具类开发
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK001

### TASK008: 认证Service层（登录、登出）
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK007

### TASK009: 认证Controller层
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK008

### TASK010: JWT认证拦截器
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK007

## 用户管理模块任务

### TASK011: 用户Service层（CRUD）
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 5小时 | **依赖任务**: TASK006

### TASK012: 用户Controller层
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK011

## 角色管理模块任务

### TASK013: 角色Service层（CRUD）
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK006

### TASK014: 角色Controller层
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK013

## 权限管理模块任务

### TASK015: 权限Service层（树形结构）
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 4小时 | **依赖任务**: TASK006

### TASK016: 权限Controller层
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 2小时 | **依赖任务**: TASK015

## 日志管理模块任务

### TASK017: 日志Service和Controller
**优先级**: 低 | **状态**: 待开始 | **预估工时**: 3小时 | **依赖任务**: TASK006

## 测试和优化任务

### TASK018: 接口测试和性能优化
**优先级**: 低 | **状态**: 待开始 | **预估工时**: 5小时 | **依赖任务**: TASK012, TASK014, TASK016
```

## 测试任务示例

### tasks-api-testing.md

```markdown
# API测试任务清单

## 项目概览
- **项目名称**：企业资源管理系统
- **测试类型**：API接口测试
- **测试框架**：pytest + httpx
- **预计工期**: 5个工作日
- **任务总数**: 10个

## 任务统计
| 优先级 | 任务数 |
|--------|--------|
| 高优先级 | 8 |
| 中优先级 | 2 |
| 总计 | 10 |

## API测试任务

### TEST001: 测试环境搭建和配置
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 4小时

#### 任务描述
搭建API测试环境，安装pytest和相关依赖，配置测试数据库和测试服务器。

#### 验收标准
- [ ] 安装pytest、httpx、pytest-asyncio等测试依赖
- [ ] 创建测试配置文件conftest.py
- [ ] 配置测试数据库（独立的测试数据库）
- [ ] 编写测试工具类（请求封装、断言封装）
- [ ] 实现测试数据初始化和清理机制
- [ ] 编写测试报告生成配置

### TEST002: 认证模块API测试
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 6小时 | **依赖任务**: TEST001

#### 任务描述
编写认证模块的API测试用例，覆盖登录、登出、Token刷新等接口。

#### 验收标准
- [ ] 测试登录接口（正常登录、用户名不存在、密码错误、账号禁用）
- [ ] 测试登出接口
- [ ] 测试Token刷新接口（正常刷新、Token过期、无效Token）
- [ ] 测试未认证访问受保护接口（401错误）
- [ ] 测试JWT Token的生成和验证逻辑
- [ ] 测试并发登录场景

### TEST003-TEST009: 其他模块API测试
**优先级**: 高/中 | **状态**: 待开始 | **预估工时**: 34小时 | **依赖任务**: TEST001, TEST002

覆盖用户、部门、角色、权限、个人中心、日志、数据字典等模块。

### TEST010: API集成测试
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 8小时 | **依赖任务**: TEST001-TEST009

#### 任务描述
编写跨模块的API集成测试用例，验证模块间的交互和数据一致性。

#### 验收标准
- [ ] 测试用户和角色的关联关系
- [ ] 测试用户和部门的关联关系
- [ ] 测试角色和权限的关联关系
- [ ] 测试权限控制的完整性（用户-角色-权限-操作）
- [ ] 测试级联删除的数据一致性
- [ ] 测试数据变更的同步性
```

### tasks-e2e-testing.md

```markdown
# E2E测试任务清单

## 项目概览
- **项目名称**：企业资源管理系统
- **测试类型**：端到端测试（E2E Testing）
- **测试框架**：Playwright
- **预计工期**: 3个工作日
- **任务总数**: 4个

## 任务统计
| 优先级 | 任务数 |
|--------|--------|
| 高优先级 | 3 |
| 中优先级 | 1 |
| 总计 | 4 |

## E2E测试任务

### TEST011: Playwright测试环境搭建
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 4小时

#### 任务描述
搭建E2E测试环境，安装Playwright和相关依赖，配置测试浏览器。

#### 验收标准
- [ ] 安装Playwright和测试依赖
- [ ] 安装浏览器驱动（Chrome、Firefox、WebKit）
- [ ] 创建测试配置文件playwright.config.ts
- [ ] 配置测试基础URL和测试数据
- [ ] 编写Page Object Model（POM）基类
- [ ] 实现测试数据初始化和清理机制
- [ ] 配置测试截图和视频录制

### TEST012: 认证和权限E2E测试
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 8小时 | **依赖任务**: TEST011

#### 任务描述
编写认证和权限相关的E2E测试用例，覆盖登录、登出、权限验证等流程。

#### 验收标准
- [ ] 测试登录流程（正常登录、用户名不存在、密码错误、账号禁用）
- [ ] 测试登出流程
- [ ] 测试Token过期自动跳转登录页
- [ ] 测试权限控制（无权限访问页面、无权限操作按钮）
- [ ] 测试路由守卫（未登录跳转）
- [ ] 测试记住密码功能

### TEST013: 用户管理E2E测试
**优先级**: 高 | **状态**: 待开始 | **预估工时**: 10小时 | **依赖任务**: TEST011, TEST012

#### 任务描述
编写用户管理相关的E2E测试用例，覆盖用户列表、创建、编辑、删除等完整流程。

#### 验收标准
- [ ] 测试用户列表页面（分页、搜索、筛选）
- [ ] 测试创建用户流程（填写表单、提交、验证创建成功）
- [ ] 测试编辑用户流程（修改信息、提交、验证更新成功）
- [ ] 测试删除用户流程（确认删除、验证删除成功）
- [ ] 测试用户状态切换流程
- [ ] 测试用户角色分配流程
- [ ] 测试表单验证（必填项、格式校验、重复校验）

### TEST014: 核心业务流程E2E测试
**优先级**: 中 | **状态**: 待开始 | **预估工时**: 12小时 | **依赖任务**: TEST011, TEST012, TEST013

#### 任务描述
编写核心业务流程的E2E测试用例，覆盖跨模块的完整业务场景。

#### 验收标准
- [ ] 测试部门管理完整流程（创建部门树、编辑部门、删除部门、分配用户）
- [ ] 测试角色管理完整流程（创建角色、分配权限、分配用户）
- [ ] 测试用户管理完整流程（创建用户、分配部门、分配角色）
- [ ] 测试权限验证完整流程（不同角色的权限控制、操作验证）
- [ ] 测试数据变更同步流程（修改角色权限、验证用户权限同步）
- [ ] 测试数据一致性流程（删除部门、验证关联用户处理）
```

## 前后端协作计划

### 依赖关系图

```
前端TASK007（登录页面） ←→ 后端TASK007-009（登录接口）
前端TASK009（用户列表） ←→ 后端TASK011-012（用户接口）
前端TASK011（角色列表） ←→ 后端TASK013-014（角色接口）
前端TASK013（权限列表） ←→ 后端TASK015-016（权限接口）
```

### Mock数据方案

前端在以下情况下可以使用Mock数据：
- 后端接口尚未开发完成
- 接口联调期间前端需要独立测试
- 演示展示需求

Mock数据位置：`src/mock/`

### 接口对接时间表

| 前端任务 | 后端任务 | API测试 | E2E测试 | 联调时间 |
|---------|---------|---------|---------|---------|
| TASK007 登录页面 | TASK007-009 登录接口 | TEST002 | TEST012 | 第3天 |
| TASK009 用户列表 | TASK011-012 用户接口 | TEST003 | TEST013 | 第5天 |
| TASK011 角色列表 | TASK013-014 角色接口 | TEST005 | TEST014 | 第6天 |
| TASK013 权限列表 | TASK015-016 权限接口 | TEST006 | TEST014 | 第7天 |

## 执行任务

执行任务命令：

```bash
# 执行前端任务
@docs/tasks-frontend.md 开始执行TASK001

# 执行后端任务
@docs/tasks-backend.md 开始执行TASK001

# 执行API测试任务
@docs/tasks-api-testing.md 开始执行TEST001

# 执行E2E测试任务
@docs/tasks-e2e-testing.md 开始执行TEST011
```

## 进度跟踪

### 前端进度跟踪

```bash
# 查看前端任务进度
@docs/tasks-frontend.md

# 标记任务完成
@docs/tasks-frontend.md 标记TASK001为已完成
```

### 后端进度跟踪

```bash
# 查看后端任务进度
@docs/tasks-backend.md

# 标记任务完成
@docs/tasks-backend.md 标记TASK001为已完成
```

### API测试进度跟踪

```bash
# 查看API测试任务进度
@docs/tasks-api-testing.md

# 标记任务完成
@docs/tasks-api-testing.md 标记TEST001为已完成
```

### E2E测试进度跟踪

```bash
# 查看E2E测试任务进度
@docs/tasks-e2e-testing.md

# 标记任务完成
@docs/tasks-e2e-testing.md 标记TEST011为已完成
```

## 相关命令

- `/analyze-requirement` - 分析需求
- `/design-prototype` - 设计原型
- `/generate-api-doc` - 生成API文档
- `/generate-sequence-diagram` - 生成时序图
