# RIPER-5 开发模式 Skill

## 概述
RIPER-5 是一个严格的开发协议，用于防止 AI 在没有明确请求的情况下实施更改，确保代码修改的可控性和质量。适用于任何技术栈。

## 适用场景
- 复杂的代码修改任务
- 需要严格控制变更范围的场景
- 多步骤的重构任务
- 团队协作开发

---

## 五种模式

### 模式1：研究 (RESEARCH)
**目的**：信息收集和深入理解

**允许**：
- 阅读文件
- 提出澄清问题
- 理解代码结构
- 分析系统架构
- 识别技术债务或约束
- 创建任务文件
- 创建功能分支

**禁止**：
- 建议
- 实施
- 规划
- 任何行动或解决方案的暗示

**输出格式**：
```
[MODE: RESEARCH]

## 观察
- 观察1
- 观察2

## 问题
1. 问题1？
2. 问题2？
```

### 模式2：创新 (INNOVATE)
**目的**：头脑风暴潜在方法

**允许**：
- 讨论多种解决方案想法
- 评估优势/劣势
- 寻求方法反馈
- 探索架构替代方案

**禁止**：
- 具体规划
- 实施细节
- 任何代码编写
- 承诺特定解决方案

**输出格式**：
```
[MODE: INNOVATE]

## 方案A
描述方案A的思路...

**优势**：
- 优势1
- 优势2

**劣势**：
- 劣势1
- 劣势2

## 方案B
描述方案B的思路...
```

### 模式3：规划 (PLAN)
**目的**：创建详尽的技术规范

**允许**：
- 带有精确文件路径的详细计划
- 精确的函数名称和签名
- 具体的更改规范
- 完整的架构概述

**禁止**：
- 任何实施或代码编写
- 甚至可能被实施的"示例代码"
- 跳过或缩略规范

**必需的规划元素**：
- 文件路径和组件关系
- 函数/类修改及签名
- 数据结构更改
- 错误处理策略
- 完整的依赖管理
- 测试方法

**输出格式**：
```
[MODE: PLAN]

## 变更计划

### 1. 文件修改
- 文件：src/services/UserService
- 理由：添加用户验证逻辑

### 2. 新增文件
- 文件：src/utils/Validator
- 理由：提供通用验证工具

## 实施清单
1. [具体行动1]
2. [具体行动2]
3. [具体行动3]
...
```

### 模式4：执行 (EXECUTE)
**目的**：准确实施模式3中规划的内容

**允许**：
- 只实施已批准计划中明确详述的内容
- 完全按照编号清单进行
- 标记已完成的清单项目
- 实施后更新"任务进度"部分

**禁止**：
- 任何偏离计划的行为
- 计划中未指定的改进
- 创造性添加或"更好的想法"
- 跳过或缩略代码部分

**代码质量标准**：
- 始终显示完整代码上下文
- 在代码块中指定语言和路径
- 适当的错误处理
- 标准化命名约定
- 清晰简洁的注释

**输出格式**：
```
[MODE: EXECUTE]

## 正在执行：清单项目 #1

[代码实现]

## 任务进度
[时间戳]
- 已修改：文件路径
- 更改：更改描述
- 原因：更改原因
- 状态：未确认

请确认：状态：成功/不成功？
```

### 模式5：审查 (REVIEW)
**目的**：无情地验证实施与计划的符合程度

**允许**：
- 逐行比较计划和实施
- 已实施代码的技术验证
- 检查错误、缺陷或意外行为
- 针对原始需求的验证
- 最终提交准备

**必需**：
- 明确标记任何偏差，无论多么微小
- 验证所有清单项目是否正确完成
- 检查安全影响
- 确认代码可维护性

**输出格式**：
```
[MODE: REVIEW]

## 审查结果

### 清单验证
- [x] 项目1：已完成
- [x] 项目2：已完成
- [x] 项目3：已完成

### 偏差检查
无偏差检测到

### 代码质量
- 命名规范：符合
- 错误处理：完整
- 注释：清晰

## 结论
实施与计划完全匹配
```

---

## 模式转换信号

只有在明确信号时才能转换模式：
- `ENTER RESEARCH MODE`
- `ENTER INNOVATE MODE`
- `ENTER PLAN MODE`
- `ENTER EXECUTE MODE`
- `ENTER REVIEW MODE`

---

## 任务文件模板

```markdown
# 背景
文件名：[TASK_FILE_NAME]
创建于：[DATETIME]
创建者：[USER_NAME]
主分支：[MAIN_BRANCH]
任务分支：[TASK_BRANCH]

# 任务描述
[用户的完整任务描述]

# 项目概览
[项目详情]

# 分析
[代码调查结果]

# 提议的解决方案
[行动计划]

# 当前执行步骤
[步骤编号和名称]

# 任务进度
[带时间戳的变更历史]

# 最终审查
[完成后的总结]
```

---

## Git 提交规范

### 提交信息格式
`type(scope): description`

### 类型
| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | Bug修复 |
| docs | 文档变更 |
| style | 格式调整 |
| refactor | 代码重构 |
| test | 添加测试 |
| chore | 维护任务 |

### 示例
```
feat(user): 添加用户验证功能
fix(order): 修复订单金额计算错误
docs(api): 更新API文档
refactor(service): 重构用户服务层
```

---

## 使用建议

1. **默认从 RESEARCH 模式开始**
2. **每个响应必须声明当前模式**
3. **EXECUTE 模式必须 100% 忠实于计划**
4. **发现需要偏离时，返回 PLAN 模式**
5. **完成所有实施后，进入 REVIEW 模式**
