desc: 高级操作测试 - iframe切换与JavaScript执行

pre_script:
  - 'print("=== 开始高级操作测试 ===")'

steps:
  # ========== 步骤1：初始化浏览器 ==========
  - 打开browser:
      关键字: open_browser
      browser: "{{BROWSER}}"
      headless: "{{HEADLESS}}"
      implicit_wait: "{{IMPLICIT_WAIT}}"
      window_size: "{{WINDOW_SIZE}}"
  
  # ========== 步骤2：访问W3School测试页 ==========
  - 导航到W3School:
      关键字: navigate_to
      url: https://www.w3school.com.cn/tiy/t.asp?f=html_form_submit
  
  # ========== 步骤3：等待页面完全加载 ==========
  - 等待页面加载:
      关键字: sleep
      time: 2
  
  # ========== 步骤4：切换到iframe内部 ==========
  - 切换到iframe:
      关键字: switch_to_frame
      locator_type: id
      element: iframeResult
  
  # ========== 步骤5：在iframe内操作-输入名字 ==========
  - 输入名字:
      关键字: input_text
      locator_type: name
      element: fname
      text: John
      clear: true
  
  # ========== 步骤6：在iframe内操作-输入姓氏 ==========
  - 输入姓氏:
      关键字: input_text
      locator_type: name
      element: lname
      text: Doe
      clear: true
  
  # ========== 步骤7：截图iframe内容 ==========
  - 截图iframe内容:
      关键字: take_screenshot
      filename: iframe_form_filled
  
  # ========== 步骤8：切换回主文档 ==========
  - 切换回主文档:
      关键字: switch_to_frame
  
  # ========== 步骤9：执行JavaScript获取页面信息 ==========
  - 执行JavaScript获取标题:
      关键字: execute_script
      脚本: return document.title;
      variable_name: page_title
  
  # ========== 步骤10：执行JavaScript滚动页面 ==========
  - 滚动到页面顶部:
      关键字: execute_script
      脚本: window.scrollTo(0, 0);
  
  # ========== 步骤11：截图最终状态 ==========
  - 截图最终状态:
      关键字: take_screenshot
      filename: advanced_operations_final
  
  # ========== 步骤12：清理环境 ==========
  - 关闭browser:
      关键字: close_browser

post_script:
  - 'print("=== 高级操作测试完成 ===")'
  - 'title = g_context().get_dict("page_title"); print(f"页面标题: {title}")'


