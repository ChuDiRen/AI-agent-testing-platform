desc: Browser-Use AI 自动化测试 - 使用 LLM 驱动的智能浏览器操作

pre_script:
  - 'print("=== 开始执行 Browser-Use AI 自动化测试 ===")'

steps:
  # ========== 步骤1：启动 Browser-Use 浏览器 ==========
  # 默认使用硬基流动 + 无头模式，无需配置
  - 启动AI浏览器:
      关键字: bu_open_browser

  # ========== 步骤2：执行复杂 AI 任务 ==========
  - AI执行搜索任务:
      关键字: bu_run_task
      task: "打开百度首页 https://www.baidu.com，在搜索框中输入 'AI自动化测试'，然后点击搜索按钮"
      max_steps: 20

  # ========== 步骤3：等待结果加载 ==========
  - 等待结果:
      关键字: sleep
      time: 3

  # ========== 步骤4：AI 断言结果可见 ==========
  - AI断言搜索结果:
      关键字: bu_assert_visible
      element_desc: 搜索结果列表

  # ========== 步骤5：AI 提取文本 ==========
  - AI提取第一个结果标题:
      关键字: bu_extract_text
      text_desc: 第一个搜索结果的标题
      variable_name: first_result_title

  # ========== 步骤6：AI 点击操作 ==========
  - AI点击第一个结果:
      关键字: bu_click
      element_desc: 第一个搜索结果链接

  # ========== 步骤7：等待页面加载 ==========
  - 等待新页面:
      关键字: sleep
      time: 3

  # ========== 步骤8：AI 截图 ==========
  - AI截图保存:
      关键字: bu_screenshot
      filename: browser_use_result

  # ========== 步骤9：关闭浏览器 ==========
  - 关闭AI浏览器:
      关键字: bu_close_browser

post_script:
  - 'print("=== Browser-Use AI 自动化测试执行完成 ===")'
  - 'title = g_context().get_dict("first_result_title"); print(f"提取的标题: {title}")'
